<!DOCTYPE html>
<html>
<head>
    <title>{{ event.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/icons8-ticket-50.png') }}" type="image/png">
    <style>
        .no-tickets-container {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #FFC107;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .no-tickets-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }
        .no-tickets-title {
            color: #FFC107;
            font-weight: bold;
            font-size: 24px;
            margin-bottom: 15px;
        }
        .no-tickets-message {
            font-size: 16px;
            margin-bottom: 25px;
            color: #ccc;
            line-height: 1.5;
        }
        .no-tickets-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .no-tickets-btn {
            background: #007bff;
            color: white;
            padding: 12px 25px;
            border-radius: 6px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .no-tickets-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .no-tickets-btn.secondary {
            background: #6c757d;
        }
        .no-tickets-btn.secondary:hover {
            background: #545b62;
        }
    </style>
</head>
<body>
<header>
    <div class="logo">
        <a href="/"><img src="{{ url_for('static', filename='images/icons8-ticket-100.png') }}" alt="Ticketbox Logo"
                         class="logo-img"></a>
    </div>
    <form class="search-bar" method="get" action="/">
        <input type="text" name="q" value="{{ search }}" placeholder="B·∫°n t√¨m g√¨ h√¥m nay?">
        <button type="submit">T√¨m ki·∫øm</button>
    </form>

    <div class="header-actions">
        <a href="{{ url_for('event_organizer.create_event') }}" class="create-event">
            <span>T·∫°o s·ª± ki·ªán</span>
        </a>
        <a href="{{ url_for('events.my_tickets') }}" class="my-ticket">
            <img src="{{ url_for('static', filename='images/icons8-ticket-30.png') }}" alt="ticket icon"
                 class="ticket-icon">
            <span>V√© c·ªßa t√¥i</span>
        </a>
    </div>

    <div class="auth-links">
            {% if current_user %}
    üëã Xin ch√†o, <strong>{{ current_user.fullname }}</strong> |
    <a href="{{ url_for('auth.logout') }}">ƒêƒÉng xu·∫•t</a>
    {% else %}
    <a href="{{ url_for('auth.login') }}">ƒêƒÉng nh·∫≠p</a> |
    <a href="{{ url_for('auth.register') }}">ƒêƒÉng k√Ω</a>
    {% endif %}
    </div>
</header>

<div class="nav">
    <a href="{{ url_for('events.home', q='Nh·∫°c s·ªëng') }}">Nh·∫°c s·ªëng</a>
    <a href="{{ url_for('events.home', q='S√¢n kh·∫•u & Ngh·ªá thu·∫≠t') }}">S√¢n kh·∫•u & Ngh·ªá thu·∫≠t</a>
    <a href="{{ url_for('events.home', q='Th·ªÉ thao') }}">Th·ªÉ thao</a>
    <a href="{{ url_for('events.home', q='Kh√°c') }}">Kh√°c</a>
</div>

<h2 class="section-title">üéü Ch·ªçn v√©</h2>
{% if current_user %}
<div style="background: rgba(76, 175, 80, 0.2); border: 1px solid #4CAF50; border-radius: 8px; padding: 15px; margin: 20px 0; text-align: center;">
    <div style="color: #4CAF50; font-weight: bold; margin-bottom: 5px;">‚úÖ ƒê√£ ƒëƒÉng nh·∫≠p</div>
    <div style="font-size: 14px;">Xin ch√†o <strong>{{ current_user.fullname }}</strong>, b·∫°n c√≥ th·ªÉ ti·∫øp t·ª•c mua v√©!</div>
</div>
{% endif %}

{% if not has_tickets %}
<div class="no-tickets-container">
    <div class="no-tickets-icon">üé´</div>
    <div class="no-tickets-title">Hi·ªán t·∫°i ch∆∞a c√≥ v√© cho ch∆∞∆°ng tr√¨nh</div>
    <div class="no-tickets-message">
        Ch∆∞∆°ng tr√¨nh <strong>"{{ event.name }}"</strong> hi·ªán ch∆∞a c√≥ v√© ƒë∆∞·ª£c ph√°t h√†nh.<br>
        Vui l√≤ng quay l·∫°i sau ho·∫∑c li√™n h·ªá v·ªõi ch√∫ng t√¥i ƒë·ªÉ bi·∫øt th√™m th√¥ng tin.
    </div>
    <div class="no-tickets-buttons">
        <a href="{{ url_for('events.home') }}" class="no-tickets-btn">
            ‚Üê V·ªÅ trang ch·ªß
        </a>
        <a href="{{ url_for('events.event_detail', event_id=event.id) }}" class="no-tickets-btn secondary">
            ‚Üê Quay l·∫°i chi ti·∫øt s·ª± ki·ªán
        </a>
    </div>
</div>
{% else %}
<div class="ticket-booking-container">
    <div class="ticket-selection">
        {% for ticket in ticket_types %}
        <div class="ticket-card">
            <div class="ticket-left">
                <div class="ticket-name">{{ ticket.name }}</div>
                <ul class="ticket-benefits">
                    {% if ticket.name == 'V√© VIP' %}
                    <li>Khu v·ª±c checkin ri√™ng, kh√¥ng ph·∫£i x·∫øp h√†ng</li>
                    <li>Gh·∫ø ng·ªìi g·∫ßn s√¢n kh·∫•u, qu√† t·∫∑ng ƒë·∫∑c bi·ªát</li>
                    <li>D·ªãch v·ª• ƒÉn u·ªëng, qu√† t·∫∑ng, giao l∆∞u ngh·ªá sƒ©</li>
                    {% else %}
                    <li>ƒê·∫£m b·∫£o quy·ªÅn l·ª£i tham gia s·ª± ki·ªán</li>
                    <li>Gh·∫ø ng·ªìi s·∫Øp x·∫øp ng·∫´u nhi√™n</li>
                    <li>Gh·∫ø ng·ªìi xa s√¢n kh·∫•u</li>
                    {% endif %}
                </ul>
                <div class="ticket-price">Gi√° v√©: {{ "{:,.0f}".format(ticket.price) }}ƒë</div>
                <div class="ticket-stock">S·ªë v√© c√≤n l·∫°i: {{ ticket.quantity }}</div>

                <div class="quantity-selector">
                    <button class="decrease" data-ticket-id="{{ ticket.id }}">-</button>
                    <input type="number" min="0" value="0" name="quantity_{{ ticket.id }}" class="quantity-input"
                           data-ticket-id="{{ ticket.id }}" data-price="{{ ticket.price }}"
                           data-name="{{ ticket.name }}">
                    <button class="increase" data-ticket-id="{{ ticket.id }}">+</button>
                </div>
            </div>
            <div class="ticket-right">
                <img src="{{ url_for('static', filename='images/ticketGAVIP.png') }}" class="ticket-image">
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="ticket-summary">
        <h4 style="">T·ªïng v√©:</h4>
        <ul id="summary-list"></ul>
        <p class="total" id="summary-total"><strong>üéü x0</strong></p>
        <a href="#" class="continue-btn" id="continue-btn" data-event-id="{{ event.id }}">Ti·∫øp t·ª•c >></a>
    </div>
</div>
{% endif %}

<!-- Footer v·ªõi b·∫£n quy·ªÅn -->
<footer class="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h3>TicketBox Clone</h3>
            <p>H·ªá th·ªëng ƒë·∫∑t v√© s·ª± ki·ªán tr·ª±c tuy·∫øn</p>
        </div>
        <div class="footer-section">
            <h4>Li√™n h·ªá</h4>
            <p>Email: info@ticketboxclone.com</p>
            <p>ƒêi·ªán tho·∫°i: 1900-xxxx</p>
        </div>
        <div class="footer-section">
            <h4>Theo d√µi</h4>
            <p>Facebook | Instagram | Twitter</p>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2024 TicketBox Clone. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
        <p>Ph√°t tri·ªÉn b·ªüi QLDAPM Team</p>
    </div>
</footer>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
