{% extends "event_organizer/layout_event_organizer/base.html" %}

{% block title %}T·∫°o s·ª± ki·ªán m·ªõi{% endblock %}

{% block content %}
<div class="topbar">
    <h2>{% block header %}T·∫°o s·ª± ki·ªán {% endblock %}</h2>
    <div class="account-wrapper">
        <div class="account" onclick="toggleDropdown()">
            T√†i kho·∫£n <i class="fa fa-caret-down"></i>
        </div>
        <div class="dropdown" id="accountDropdown">
            <a>Th√¥ng tin c√° nh√¢n</a>
            <a>ƒêƒÉng xu·∫•t</a>
        </div>
    </div>
</div>
<div class="form-wrapper">

    <!-- Thanh ti·∫øn tr√¨nh -->z
    <div class="step-progress">
        <div class="step active">
            <div class="circle">1</div>
            <div class="label">Th√¥ng tin s·ª± ki·ªán</div>
        </div>
        <div class="step">
            <div class="circle">2</div>
            <div class="label">Th·ªùi gian & Lo·∫°i v√©</div>
        </div>
        <div class="step">
            <div class="circle">3</div>
            <div class="label">M√£ khuy·∫øn m√£i</div>
        </div>
        <div class="step-buttons">
            <button class="btn btn-prev" onclick="goToPrevStep()">Quay l·∫°i</button>
            <button class="btn btn-next" onclick="goToNextStep()">Ti·∫øp t·ª•c</button>
        </div>
    </div>

    <!-- N·ªôi dung ch√≠nh c√≥ th·ªÉ cu·ªôn -->
    <div class="main-content-scrollable content-center ">
        <div class="content-center">
            <div class="event-form-wrapper">
                <div class="event-form-section step-section step-1 active">
                    <label class="required-label">
                        <span class="text-danger">*</span> H√¨nh ·∫£nh s·ª± ki·ªán
                    </label>
                    <div class="upload-box" onclick="document.getElementById('imageUpload').click();">
                        <input type="file" id="imageUpload" name="event_image" accept="image/*" style="display: none;"
                               onchange="previewImage(event)">
                        <div id="upload-preview">
                            <div>
                                <div class="icon">üì∑</div>
                                <p>Th√™m ·∫£nh s·ª± ki·ªán</p>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="required-label"><span class="text-danger">*</span> T√™n s·ª± ki·ªán</label>
                        <input type="text" name="name_event" id="name_event" maxlength="100" placeholder="T√™n s·ª± ki·ªán">
                        <div class="text-counter">0 / 100</div>
                    </div>

                    <div class="form-group">
                        <label class="required-label"><span class="text-danger">*</span> H√¨nh th·ª©c s·ª± ki·ªán </label>
                        <div class="radio-group">
                            <label><input type="radio" name="event_format" value="offline" checked
                                          onchange="handleEventFormatChange()"> S·ª± ki·ªán Offline</label>
                            <label><input type="radio" name="event_format" value="online"
                                          onchange="handleEventFormatChange()"> S·ª± ki·ªán Online</label>
                        </div>
                    </div>

                    <div class="form-info-event-offline">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" name="has_seat" id="has_seat" value="true">
                                C√≥ ch·ªó ng·ªìi (gh·∫ø) kh√¥ng?
                            </label>
                        </div>

                        <div id="seat-setup-section" style="display:none; margin-top: 15px;">
                            <h4>Thi·∫øt l·∫≠p ch·ªó ng·ªìi</h4>
                            <div class="form-group">
                                <label for="num_rows">S·ªë h√†ng gh·∫ø:</label>
                                <input type="number" id="num_rows" name="num_rows" min="1" max="26" value="10"/>
                                <small>(T·ªëi ƒëa 26 h√†ng, t∆∞∆°ng ·ª©ng A-Z)</small>
                            </div>
                            <div class="form-group">
                                <label for="seats_per_row">S·ªë gh·∫ø m·ªói h√†ng:</label>
                                <input type="number" id="seats_per_row" name="seats_per_row" min="1" max="100"
                                       value="15"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="required-label"><span class="text-danger">*</span> T√™n ƒë·ªãa ƒëi·ªÉm</label>
                            <input type="text" name="venue_name" id="venue_name" maxlength="80"
                                   placeholder="T√™n ƒë·ªãa ƒëi·ªÉm">
                            <div class="text-counter">0 / 80</div>
                        </div>
                        <div class="form-group">
                            <label class="required-label"><span class="text-danger">*</span> ƒê·ªãa ch·ªâ c·ª• th·ªÉ</label>
                            <input type="text" name="address" id="address" placeholder="ƒê·ªãa ch·ªâ c·ª• th·ªÉ">
                        </div>
                    </div>

                    <div class="form-info-event-online">
                        <div class="form-group">
                            <label class="required-label"><span class="text-danger">*</span> Link tham gia s·ª±
                                ki·ªán</label>
                            <input type="text" name="livestream_url" id="livestream_url" maxlength="80"
                                   placeholder="Link tham gia s·ª± ki·ªán">
                            <div class="text-counter">0 / 80</div>
                        </div>
                    </div>

                    <div class="form-group form-row">
                        <div>
                            <label class="required-label"><span class="text-danger">*</span> Th·ªÉ lo·∫°i s·ª± ki·ªán</label>
                            <select name="event_type" id="event_type">
                                {% for key, label in event_type.items() %}
                                <option value="{{ key }}">{{ label }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="required-label"><span class="text-danger">*</span> Th√¥ng tin s·ª± ki·ªán</label>
                        <textarea name="description" id="description" rows="4"
                                  placeholder="Nh·∫≠p th√¥ng tin..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="required-label"><span class="text-danger">*</span> Lu·∫≠t l·ªá s·ª± ki·ªán</label>
                        <textarea name="rules" id="rules" rows="4" placeholder="Nh·∫≠p th√¥ng tin..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="required-label"><span class="text-danger">*</span> Th√¥ng tin ng∆∞·ªùi bi·ªÉu di·ªÖn s·ª±
                            ki·ªán</label>
                        <textarea name="performers" id="performers" rows="4" placeholder="Nh·∫≠p th√¥ng tin..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="required-label"><span class="text-danger">*</span> Th√¥ng tin ng∆∞·ªùi t·ªï ch·ª©c</label>
                        <textarea name="organizer" id="organizer" rows="4" placeholder="Nh·∫≠p th√¥ng tin..."></textarea>
                    </div>
                </div>

                <div class="event-form-section step-section step-2">
                    <h3>Th·ªùi gian s·ª± ki·ªán</h3>
                    <div class="form-group form-row">
                        <div>
                            <label class="required-label">
                                <span class="text-danger">*</span> Ng√†y b·∫Øt ƒë·∫ßu
                            </label>
                            <input type="datetime-local" id="start_time" name="start_time" required>
                        </div>
                        <div>
                            <label class="required-label">
                                <span class="text-danger">*</span> Ng√†y k·∫øt th√∫c
                            </label>
                            <input type="datetime-local" id="end_time" name="end_time" required>
                        </div>
                    </div>

                    <h3>Th√¥ng tin c√°c lo·∫°i v√©</h3>
                    <div id="ticket-types">
                        <div class="ticket-type form-group form-row">
                            <div>
                                <label class="required-label">
                                    <span class="text-danger">*</span> T√™n v√©
                                </label>
                                <input type="text" class="ticket_name" placeholder="V√≠ d·ª•: V√© th∆∞·ªùng">
                            </div>
                            <div>
                                <label class="required-label">
                                    <span class="text-danger">*</span> Gi√° v√©(VNƒê)
                                </label>
                                <input type="number" class="ticket_price" min="0" placeholder="100000">
                            </div>
                            <div>
                                <label class="required-label">
                                    <span class="text-danger">*</span> S·ªë l∆∞·ª£ng
                                </label>
                                <input type="number" class="ticket_quantity" min="1" placeholder="50">
                            </div>
                            <div class="form-group requires-seat-container"
                                 style="display:none; align-self:center; padding-left:10px;">
                                <label>
                                    <input type="checkbox" class="requires_seat" required>
                                    Y√™u c·∫ßu ch·ªçn gh·∫ø
                                </label>
                            </div>
                            <div>
                                <label class="required-label">
                                    <span class="text-danger">*</span> L·ª£i √≠ch
                                </label>
                                <input type="text" class="ticket_benefits"
                                       placeholder="H√£y nh·∫≠p v·ªõi c·∫•u tr√∫c l·ª£i √≠ch 1 | l·ª£i √≠ch 2">
                            </div>

                        </div>
                    </div>

                    <button type="button" class="btn btn-save" onclick="addTicketType()">+ Th√™m lo·∫°i v√©</button>
                </div>

                <div class="event-form-section step-section step-3">
                    <h3>M√£ khuy·∫øn m√£i</h3>

                </div>

            </div>
        </div>
    </div>
    <div id="toast-container" style="position: fixed; top: 20px; right: 20px; z-index: 9999;"></div>

    {% endblock %}
</div>